{"ast":null,"code":"import { useRef, useEffect } from 'react';\nimport { BufferGeometry } from 'three';\nimport { SubdivisionModifier } from 'three/examples/jsm/modifiers/SubdivisionModifier';\n\nfunction useSubdivision(subdivisions) {\n  const ref = useRef();\n  const original = useRef();\n  const modifier = useRef();\n  useEffect(() => {\n    if (!original.current) {\n      original.current = ref.current.geometry.clone();\n      modifier.current = new SubdivisionModifier(parseInt(subdivisions));\n    }\n  }, [subdivisions]);\n  useEffect(() => {\n    modifier.current.subdivisions = subdivisions;\n  }, [subdivisions]);\n  useEffect(() => {\n    if (original.current && ref.current) {\n      const bufferGeometry = new BufferGeometry();\n      const subdivided = bufferGeometry.fromGeometry(modifier.current.modify(original.current));\n      ref.current.geometry = subdivided;\n    }\n  }, [subdivisions]);\n  return ref;\n}\n\nexport { useSubdivision };","map":{"version":3,"sources":["/Users/artemis/Desktop/r3f-basic-demo-forked (1)/node_modules/@react-three/drei/useSubdivision.js"],"names":["useRef","useEffect","BufferGeometry","SubdivisionModifier","useSubdivision","subdivisions","ref","original","modifier","current","geometry","clone","parseInt","bufferGeometry","subdivided","fromGeometry","modify"],"mappings":"AAAA,SAASA,MAAT,EAAiBC,SAAjB,QAAkC,OAAlC;AACA,SAASC,cAAT,QAA+B,OAA/B;AACA,SAASC,mBAAT,QAAoC,kDAApC;;AAEA,SAASC,cAAT,CAAwBC,YAAxB,EAAsC;AACpC,QAAMC,GAAG,GAAGN,MAAM,EAAlB;AACA,QAAMO,QAAQ,GAAGP,MAAM,EAAvB;AACA,QAAMQ,QAAQ,GAAGR,MAAM,EAAvB;AACAC,EAAAA,SAAS,CAAC,MAAM;AACd,QAAI,CAACM,QAAQ,CAACE,OAAd,EAAuB;AACrBF,MAAAA,QAAQ,CAACE,OAAT,GAAmBH,GAAG,CAACG,OAAJ,CAAYC,QAAZ,CAAqBC,KAArB,EAAnB;AACAH,MAAAA,QAAQ,CAACC,OAAT,GAAmB,IAAIN,mBAAJ,CAAwBS,QAAQ,CAACP,YAAD,CAAhC,CAAnB;AACD;AACF,GALQ,EAKN,CAACA,YAAD,CALM,CAAT;AAMAJ,EAAAA,SAAS,CAAC,MAAM;AACdO,IAAAA,QAAQ,CAACC,OAAT,CAAiBJ,YAAjB,GAAgCA,YAAhC;AACD,GAFQ,EAEN,CAACA,YAAD,CAFM,CAAT;AAGAJ,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIM,QAAQ,CAACE,OAAT,IAAoBH,GAAG,CAACG,OAA5B,EAAqC;AACnC,YAAMI,cAAc,GAAG,IAAIX,cAAJ,EAAvB;AACA,YAAMY,UAAU,GAAGD,cAAc,CAACE,YAAf,CAA4BP,QAAQ,CAACC,OAAT,CAAiBO,MAAjB,CAAwBT,QAAQ,CAACE,OAAjC,CAA5B,CAAnB;AACAH,MAAAA,GAAG,CAACG,OAAJ,CAAYC,QAAZ,GAAuBI,UAAvB;AACD;AACF,GANQ,EAMN,CAACT,YAAD,CANM,CAAT;AAOA,SAAOC,GAAP;AACD;;AAED,SAASF,cAAT","sourcesContent":["import { useRef, useEffect } from 'react';\nimport { BufferGeometry } from 'three';\nimport { SubdivisionModifier } from 'three/examples/jsm/modifiers/SubdivisionModifier';\n\nfunction useSubdivision(subdivisions) {\n  const ref = useRef();\n  const original = useRef();\n  const modifier = useRef();\n  useEffect(() => {\n    if (!original.current) {\n      original.current = ref.current.geometry.clone();\n      modifier.current = new SubdivisionModifier(parseInt(subdivisions));\n    }\n  }, [subdivisions]);\n  useEffect(() => {\n    modifier.current.subdivisions = subdivisions;\n  }, [subdivisions]);\n  useEffect(() => {\n    if (original.current && ref.current) {\n      const bufferGeometry = new BufferGeometry();\n      const subdivided = bufferGeometry.fromGeometry(modifier.current.modify(original.current));\n      ref.current.geometry = subdivided;\n    }\n  }, [subdivisions]);\n  return ref;\n}\n\nexport { useSubdivision };\n"]},"metadata":{},"sourceType":"module"}